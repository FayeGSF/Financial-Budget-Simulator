{"ast":null,"code":"var _jsxFileName = \"/Users/shufengoh/Desktop/MAC 2025/COMP693 Individual Project/COMP693_25S2_project_Shu_Fen_Goh_1162340/frontend/src/components/Tips.jsx\",\n  _s = $RefreshSig$();\n// only show 3 tips at a time\n// if user dismiss, record the tips id and show the next one. \n// require 2 states, 1 for the read state and 1 for dismissed state \n// if user clicks \"read\" the tip will go to the end of the list, tip will still be is_active: 1\n\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport TipIcons from './TipIcons';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Tips({\n  tips,\n  isLoading\n}) {\n  _s();\n  const apiBaseUrl = process.env.REACT_APP_API_URL;\n  const [dismissedTips, setDismissedTips] = useState(new Set());\n  const [readTips, setReadTips] = useState(new Set());\n  // if more than  3 tips use showAll state\n  const [showAll, setShowAll] = useState(null);\n\n  // Get active tips, sort unread and only ones where is_active =1\n  const activeTips = (tips || []).filter(tip => (tip.is_active === true || tip.is_active === 1) && !dismissedTips.has(tip.tip_id));\n\n  // Separate unread and read tips\n  const unreadTips = activeTips.filter(tip => !readTips.has(tip.tip_id));\n  const readTipsList = activeTips.filter(tip => readTips.has(tip.tip_id));\n\n  // Show unread tips first, then read tips if no unread tips available\n  const tipsToShow = unreadTips.length > 0 ? unreadTips : readTipsList;\n  const handleAction = async (tip_id, action) => {\n    try {\n      await axios.post(`${apiBaseUrl}/api/tips/interact`, {\n        tip_id,\n        action\n      }, {\n        withCredentials: true\n      });\n      if (action === 'dismissed') {\n        // Immediately remove the tip from display, add the tip_id into the dissmissed set\n        setDismissedTips(prev => new Set([...prev, tip_id]));\n      } else {\n        // For 'read' action, just move to next tip until the list is exhausted\n        setReadTips(prev => new Set([...prev, tip_id]));\n      }\n    } catch (error) {\n      console.error('Error saving tip interaction:', error);\n    }\n  };\n  const hasMoreTips = tipsToShow.length > 3;\n\n  // Show \"No more tips for today\" when all tips are read or no active tips\n  if (tipsToShow.length === 0 || unreadTips.length === 0 && readTipsList.length > 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center py-8\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-700\",\n        children: \"No more tips for today\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-4\",\n    children: [(showAll ? tipsToShow : tipsToShow.slice(0, 2)).map(tip => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border rounded-lg p-4 bg-gray-50\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(TipIcons, {\n          tipType: tip.tip_type,\n          priority: tip.priority\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"font-semibold text-gray-800\",\n          children: tip.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-gray-700 mt-2\",\n        children: tip.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 21\n      }, this), tip.actionable_advice && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-blue-700 mt-1 italic\",\n        children: tip.actionable_advice\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-4 mt-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleAction(tip.tip_id, 'read'),\n          className: \"px-3 py-1 bg-green-500 text-white text-xs rounded hover:bg-green-600\",\n          children: \"\\u2713 Read\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleAction(tip.tip_id, 'dismissed'),\n          className: \"px-3 py-1 bg-gray-500 text-white text-xs rounded hover:bg-gray-600\",\n          children: \"\\u2717 Dismiss\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 21\n      }, this)]\n    }, tip.tip_id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }, this)), hasMoreTips && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \" text-center \",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setShowAll(!showAll),\n        className: \"text-indigo-600 hover:text-indigo-700 font-medium text-sm  transition-colors\",\n        children: showAll ? 'Show Less' : `Show ${tipsToShow.length - 2} More`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 9\n  }, this);\n}\n_s(Tips, \"RkCBGXDdO02lThxSbwJ8ZRneZ2E=\");\n_c = Tips;\nvar _c;\n$RefreshReg$(_c, \"Tips\");","map":{"version":3,"names":["React","useState","axios","TipIcons","jsxDEV","_jsxDEV","Tips","tips","isLoading","_s","apiBaseUrl","process","env","REACT_APP_API_URL","dismissedTips","setDismissedTips","Set","readTips","setReadTips","showAll","setShowAll","activeTips","filter","tip","is_active","has","tip_id","unreadTips","readTipsList","tipsToShow","length","handleAction","action","post","withCredentials","prev","error","console","hasMoreTips","className","children","fileName","_jsxFileName","lineNumber","columnNumber","slice","map","tipType","tip_type","priority","title","message","actionable_advice","onClick","_c","$RefreshReg$"],"sources":["/Users/shufengoh/Desktop/MAC 2025/COMP693 Individual Project/COMP693_25S2_project_Shu_Fen_Goh_1162340/frontend/src/components/Tips.jsx"],"sourcesContent":["// only show 3 tips at a time\n// if user dismiss, record the tips id and show the next one. \n// require 2 states, 1 for the read state and 1 for dismissed state \n// if user clicks \"read\" the tip will go to the end of the list, tip will still be is_active: 1\n\nimport React, { useState } from 'react'\nimport axios from 'axios';\nimport TipIcons from './TipIcons'\n\nexport default function Tips({ tips, isLoading }) {\n    const apiBaseUrl = process.env.REACT_APP_API_URL;\n    const [dismissedTips, setDismissedTips] = useState(new Set());\n    const [readTips, setReadTips] = useState(new Set());\n    // if more than  3 tips use showAll state\n    const [showAll, setShowAll] = useState (null)\n \n    // Get active tips, sort unread and only ones where is_active =1\n    const activeTips = (tips || []).filter(tip => \n        (tip.is_active === true || tip.is_active === 1) && \n        !dismissedTips.has(tip.tip_id)\n    );\n    \n    // Separate unread and read tips\n    const unreadTips = activeTips.filter(tip => !readTips.has(tip.tip_id));\n    const readTipsList = activeTips.filter(tip => readTips.has(tip.tip_id));\n    \n    // Show unread tips first, then read tips if no unread tips available\n    const tipsToShow = unreadTips.length > 0 ? unreadTips : readTipsList;\n\n    const handleAction = async (tip_id, action) => {\n        try {\n            await axios.post(`${apiBaseUrl}/api/tips/interact`, {\n                tip_id,\n                action\n            }, { withCredentials: true });\n            \n            if (action === 'dismissed') {\n                // Immediately remove the tip from display, add the tip_id into the dissmissed set\n                setDismissedTips(prev => new Set([...prev, tip_id]));\n            } else {\n                  // For 'read' action, just move to next tip until the list is exhausted\n                setReadTips(prev => new Set([...prev, tip_id]));\n            }\n        } catch (error) {\n            console.error('Error saving tip interaction:', error);\n        }\n    }\n\n    const hasMoreTips = tipsToShow.length > 3\n\n    // Show \"No more tips for today\" when all tips are read or no active tips\n    if (tipsToShow.length === 0 || (unreadTips.length === 0 && readTipsList.length > 0)) {\n        return (\n            <div className=\"text-center py-8\">\n                <p className=\"text-gray-700\">No more tips for today</p>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"space-y-4\">\n            {(showAll ? tipsToShow : tipsToShow.slice(0, 2)).map((tip) => (\n                <div key={tip.tip_id} className=\"border rounded-lg p-4 bg-gray-50\">\n                    <div className=\"flex items-center gap-2\">\n                        <TipIcons tipType={tip.tip_type} priority={tip.priority} />\n                        <h4 className=\"font-semibold text-gray-800\">{tip.title}</h4>\n                    </div>\n                    <p className=\"text-sm text-gray-700 mt-2\">{tip.message}</p>\n                    {tip.actionable_advice && (\n                        <p className=\"text-sm text-blue-700 mt-1 italic\">{tip.actionable_advice}</p>\n                    )}\n                    <div className=\"flex gap-4 mt-3\">\n                        <button \n                            onClick={() => handleAction(tip.tip_id, 'read')}\n                            className=\"px-3 py-1 bg-green-500 text-white text-xs rounded hover:bg-green-600\"\n                        >\n                            ✓ Read\n                        </button>\n                        <button \n                            onClick={() => handleAction(tip.tip_id, 'dismissed')}\n                            className=\"px-3 py-1 bg-gray-500 text-white text-xs rounded hover:bg-gray-600\"\n                        >\n                            ✗ Dismiss\n                        </button>\n                    </div>\n                </div>\n            ))}\n            {/* Show More Tips button */}\n            {hasMoreTips && (\n                <div className =\" text-center \">\n                    <button\n                        onClick={() => setShowAll(!showAll)}\n                        className=\"text-indigo-600 hover:text-indigo-700 font-medium text-sm \n                        transition-colors\"\n                        >\n                        {showAll ? 'Show Less' : `Show ${tipsToShow.length - 2} More`}\n                        </button>\n                </div>\n            )}\n        </div>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}